npm run check-prettier ||
(
    echo 'âŒ Prettier failed in checking. Run "npm run prettier-fix" to let prettier format your files.';
    false;
)

echo -e 'âœ… Prettier formatting complete. (1/4)\n'
echo -e 'ğŸš§ Running your tests...\n'

# Run tests
npm run test ||
(
    echo 'âŒ Not all your tests passed.';
    false;
)

echo -e 'âœ… Testing complete. (2/4)\n'
echo -e 'ğŸš§ Checking ESLint...\n'

# Check ESLint Standards
npm run check-lint ||
(
    echo 'âŒ ESLint failed in checking. Run "npm run lint-fix" to fix the issues. If they are not addressed automatically, please address them manually and try to commit again.';
    false;
)

echo -e 'âœ… ESLint check complete. (3/4)\n'
echo -e 'ğŸš§ Checking Jest coverage...\n'

# Check Jest coverage
npm run test -- --coverage --coverageThreshold='{"global": {"branches": 90, "functions": 90, "lines": 90, "statements": 90}}' ||
(
    echo 'âŒ Coverage threshold not met. Ensure your new code is covered above 90%.';
    false;
)

echo -e 'âœ… Jest coverage check complete. (4/4)\n'
echo -e 'ğŸš§ Building your application...\n'

npm run build ||
(
    echo 'âŒ Build failed. Please address the issues above and try to commit again.';
    false;
)

# If everything passes... Now we can commit
echo -e 'âœ… All checks completed. (5/5)\n'
echo -e 'Committing... \n'